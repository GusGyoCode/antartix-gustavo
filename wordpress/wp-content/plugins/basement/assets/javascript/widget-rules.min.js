function gk_widget_control_init(e,s){var t=jQuery(".gk_widget_rules_form"),a=null,n=0;if(!s){for(var i=0;i<t.length;i++)"#"+jQuery(t[i]).attr("id")==e&&(a=jQuery(t[i]),n+=1);if(n>1)return a.attr("id",a.attr("id")+"-"+Math.floor(1e4*Math.random()+1)),a.attr("data-state","uninitialized"),void gk_widget_control_init("#"+a.attr("id"),!0)}if(s){var r=function(){setTimeout(function(){gk_widget_control_init_events(e,s),jQuery(document).unbind("mouseup",r)},250)};jQuery(document).bind("mouseup",r)}else gk_widget_control_init_events(e,s)}function gk_widget_control_init_events(e){var s=jQuery(e);if("initialized"!==s.attr("data-state")){s.attr("data-state","initialized");var t=s.parent().find(".gk_widget_rules_select"),a=s.children(".gk_widget_rules_form_select"),n=s.find(".gk_widget_rules_form_input_page").parent(),i=s.find(".gk_widget_rules_form_input_post").parent(),r=s.find(".gk_widget_rules_form_input_category").parent(),o=s.find(".gk_widget_rules_form_input_tag").parent(),l=s.find(".gk_widget_rules_form_input_author").parent(),d=s.find(".gk_widget_rules_btn");"all"==t.children("option:selected").val()&&s.css("display","none"),t.change(function(){var e=t.children("option:selected").val();"all"==e?s.css("display","none"):s.css("display","block")}),gk_widget_control_refresh(s),a.change(function(){var e=a.children("option:selected").val();"homepage"==e||"page404"==e||"search"==e||"archive"==e?(n.css("display","none"),i.css("display","none"),r.css("display","none"),o.css("display","none"),l.css("display","none")):"page:"==e?(n.css("display","block"),i.css("display","none"),r.css("display","none"),o.css("display","none"),l.css("display","none")):"post:"==e?(n.css("display","none"),i.css("display","block"),r.css("display","none"),o.css("display","none"),l.css("display","none")):"category:"==e?(n.css("display","none"),i.css("display","none"),r.css("display","block"),o.css("display","none"),l.css("display","none")):"tag:"==e?(n.css("display","none"),i.css("display","none"),r.css("display","none"),o.css("display","block"),l.css("display","none")):"author:"==e?(n.css("display","none"),i.css("display","none"),r.css("display","none"),o.css("display","none"),l.css("display","block")):"template:"==e&&(n.css("display","none"),i.css("display","none"),r.css("display","none"),o.css("display","none"),l.css("display","none"))}),d.click(function(e){e.preventDefault();var t=s.find(".gk_widget_rules_output"),n=a.children("option:selected").val();"homepage"==n?t.val(t.val()+",homepage"):"blog"==n?t.val(t.val()+",blog"):"search"==n?t.val(t.val()+",search"):"archive"==n?t.val(t.val()+",archive"):"page404"==n?t.val(t.val()+",page404"):"page:"==n?t.val(t.val()+",page:"+s.find(".gk_widget_rules_form_input_page").val()):"post:"==n?t.val(t.val()+",post:"+s.find(".gk_widget_rules_form_input_post").val()):"category:"==n?t.val(t.val()+",category:"+s.find(".gk_widget_rules_form_input_category").val()):"tag:"==n?t.val(t.val()+",tag:"+s.find(".gk_widget_rules_form_input_tag").val()):"author:"==n&&t.val(t.val()+",author:"+s.find(".gk_widget_rules_form_input_author").val()),gk_widget_control_refresh(s)}),s.find(".gk_widget_rules_pages div").click(function(e){if("strong"==e.target.nodeName.toLowerCase()){var t=s.find(".gk_widget_rules_output"),a=jQuery(e.target).parent();a.find("strong").remove();var n=a.text();"All pages"==n?n="page:":"All posts pages"==n?n="post:":"All category pages"==n?n="category:":"All tag pages"==n?n="tag:":"All author pages"==n&&(n="author:"),t.val(t.val().replace(","+n,"")),gk_widget_control_refresh(s)}});var g=jQuery(document).find(".gk_widget_rules_select_styles");g.each(function(e,s){s=jQuery(s),s.hasClass("initialized")||(s.change(function(){var e=s.children("option:selected").val(),t=s.parent().parent().next("p");"gkcustom"!=e?t.hasClass("gk-unvisible")||t.addClass("gk-unvisible"):t.hasClass("gk-unvisible")&&t.removeClass("gk-unvisible")}),s.addClass("initialized"))})}}function gk_widget_control_refresh(e){var s=e.find(".gk_widget_rules_output");if(s.length>0){var t=e.find(".gk_widget_rules_pages div");t.html("");for(var a=s.val().split(","),n=!1,i=0;i<a.length;i++)if(""!=a[i]){n=!0;var r="homepage";"page:"==a[i].substr(0,5)?r="page":"post:"==a[i].substr(0,5)?r="post":"category:"==a[i].substr(0,9)?r="category":"tag:"==a[i].substr(0,4)?r="tag":"archive"==a[i].substr(0,7)?r="archive":"author:"==a[i].substr(0,7)?r="author":"page404"==a[i].substr(0,7)?r="page404":"search"==a[i].substr(0,6)?r="search":"blog"==a[i].substr(0,4)&&(r="blog");var o=a[i];"page:"==o?o="All pages":"post:"==o?o="All posts pages":"category:"==o?o="All category pages":"tag:"==o?o="All tag pages":"author:"==o&&(o="All author pages"),t.html(t.html()+"<span class="+r+">"+o+"<strong>&times;</strong></span>")}e.find(".gk_widget_rules_nopages").css("display",n?"none":"block")}}jQuery.cookie=function(e,s,t){if(arguments.length>1&&"[object Object]"!==String(s)){if(t=jQuery.extend({},t),(null===s||void 0===s)&&(t.expires=-1),"number"==typeof t.expires){var a=t.expires,n=t.expires=new Date;n.setDate(n.getDate()+a)}return s=String(s),document.cookie=[encodeURIComponent(e),"=",t.raw?s:encodeURIComponent(s),t.expires?"; expires="+t.expires.toUTCString():"",t.path?"; path="+t.path:"",t.domain?"; domain="+t.domain:"",t.secure?"; secure":""].join("")}t=s||{};var i,r=t.raw?function(e){return e}:decodeURIComponent;return(i=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?r(i[1]):null},jQuery(window).on("beforeunload",function(){jQuery.cookie("gk_last_opened_widget_rules_wrap",0,{expires:365,path:"/"})}),jQuery(document).click(function(e){if(jQuery(e.target).hasClass("gk_widget_rules_btn")){var s=jQuery(e.target).next(".gk_widget_rules_wrapper");s.hasClass("active")?(s.removeClass("active"),jQuery.cookie("gk_last_opened_widget_rules_wrap",0,{expires:365,path:"/"})):(s.addClass("active"),jQuery.cookie("gk_last_opened_widget_rules_wrap",s.attr("data-id"),{expires:365,path:"/"}))}});