!function(t,i,e){"use strict";function a(){var t=this;t.fillSmartTiles(),t.smartTiles()}var l=(t(i),t(e)),s=(t("body"),".galleries_tile_add"),d=".galleries_tile_sortable",r=".galleries_tile_remove",n=".ui-state-default";a.prototype={fillSmartTiles:function(){var t=this,i=l.find(".galleries_tile_insert"),e=i.val(),a=l.find(d);if(e)for(var o=e.split(","),c=0;c<o.length;c++)if(a.size()>0){var f=o[c];if(o[c]){var g=l.find(s+' option[value="'+f+'"]'),u=g.text(),v=g.data("img")?'<div class="galleries_thumb" style="background-image: url('+g.data("img")+')" data-src="'+g.data("img")+'"></div>':"",h='<strong class="galleries_tile_title">'+u+"</strong>",_='<a href="'+g.data("edit")+'" target="_blank" class="button-secondary button galleries_tile_edit" title="">'+g.data("edit-title")+"</a>",m='<a href="#" class="'+r.slice(1)+'" title=""><i class="fa fa-remove"></i></a>',p='<i class="fa fa-arrows galleries_tile_handle"></i>';g.remove(),t.isEmpty(a)&&a.addClass("activate"),a.append('<div class="'+n.slice(1)+' cf" data-id="'+f+'">'+v+h+p+m+_+"</div>"),t.updateSlides(a)}}},updateSlides:function(i){var e=this,a=l.find(".galleries_tile_insert"),s=[];!e.isEmpty(i)&&a.size()>0?(i.find(n).each(function(){s.push(t(this).data("id"))}),a.val(s.join()).trigger("change")):a.val("").trigger("change")},smartTiles:function(){var i=this,e=(t(s),t(d));l.on("change",s,function(){var e=t(this),a=e.val(),s=e.find('option[value="'+a+'"]'),o=s.text(),c=l.find(d);if(c.size()>0&&a){var f=s.data("img")?'<div class="galleries_thumb" style="background-image: url('+s.data("img")+')" data-src="'+s.data("img")+'"></div>':"",g='<strong class="galleries_tile_title">'+o+"</strong>",u='<a href="'+s.data("edit")+'" target="_blank" class="button-secondary button galleries_tile_edit" title="">'+s.data("edit-title")+"</a>",v='<a href="#" class="'+r.slice(1)+'" title=""><i class="fa fa-remove"></i></a>',h='<i class="fa fa-arrows galleries_tile_handle"></i>';i.isEmpty(c)&&c.addClass("activate"),c.append('<div class="'+n.slice(1)+' cf" data-id="'+a+'">'+f+g+h+v+u+"</div>"),s.remove(),i.updateSlides(c)}}),l.on("click",r,function(){var e=t(this),a=e.closest(n),r=a.find(".galleries_tile_title").text(),o=a.data("id"),c=a.find(".galleries_thumb").data("src"),f=a.find(".galleries_tile_edit").attr("href"),g=a.find(".galleries_tile_edit").text(),u=l.find(s),v=l.find(d);!u.find('option[value="'+o+'"]').size()>0&&u.append(t("<option></option>").attr("value",o).attr("data-img",c).attr("data-edit",f).attr("data-edit-title",g).text(r)),a.remove(),i.isEmpty(v)&&v.removeClass("activate"),i.updateSlides(v)}),e.each(function(){t(this).sortable({axis:"y",placeholder:"ui-state-highlight",handle:".galleries_tile_handle",update:function(){i.updateSlides(t(this))},stop:function(){i.updateSlides(t(this))}}),t(this).disableSelection()})},isEmpty:function(i){return!t.trim(i.html())}},new a}(jQuery,window,document);