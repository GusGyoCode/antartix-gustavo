!function(e,t,a){"use strict";function i(t,i){var n=this;n.element=e(t),n.options=e.extend({},s,i),r.load(function(){n.stretchGrid(),n.initBasementGalleryCarousel(l,c),n.loadMoreGallery(),n.magnificPopup(),e(a).on("click",".basement-gallery-carousel-tiles_type-classic .figure, .basement-gallery-tiles_type-classic:not(.basement-portfolio-wrapper) .figure",function(){!e(this).children("a").size()>0&&e(this).parent("div").find("a").trigger("click")}),e(a).on("click",".classic-helpers-icons a.icon-arr",function(){e(this).closest("h5").children("a").trigger("click")}),n.initGallery(),n.isotopeMix()}).resize(function(){n.stretchGrid()})}var n="BasementGallery",s={},r=e(t),o=e(a),l=e(".basement-gallery-carousel"),c={};i.prototype={magnificPopup:function(){e(".magnific"),e(".basement-gallery-magnific-wrap"),e(".magnific-gallery"),e(".magnific-video");o.find(".basement-gallery-magnific-wrap").each(function(){var t=e(this);t.find(".magnific").magnificPopup({type:"image",tLoading:"",gallery:{enabled:!0,tCounter:'<span class="mfp-counter">%curr% &mdash; %total%</span>',navigateByImgClick:!0},fixedContentPos:!1,callbacks:{open:function(){e("body").addClass("noscroll")},close:function(){e("body").removeClass("noscroll")}},image:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><div class="mfp-top-bar"></div><div class="mfp-img"></div><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></div>',titleSrc:function(e){return e.el.data("title")}}})})},isotopeMix:function(){var a=e(".basement-gallery-isotope-list"),i=e(".basement-gallery-nav-category"),n="masonry";if(a.size()>0){var s=""!==t.location.hash?t.location.hash:"#all";i.find("a").parent().removeClass("selected"),i.find('a[href="'+s+'"]').parent().addClass("selected"),s="#all"==s?"*":s.replace("#","."),"*"===s&&a.css("opacity",1),"*"!==s&&a.css("opacity",1),a.isotope({itemSelector:".mix",layoutMode:n,percentPosition:!0,transitionDuration:"0.3s",filter:s})}},initGallery:function(){var t=e(".basement-gallery-nav-category"),a=e(".basement-gallery-mix-list"),i=e(".basement-gallery-isotope-list");if(t.size()>0){if(a.size()>0){mixitup(a,{callbacks:{onMixClick:function(t,a){var i=e(a.target);return i.hasClass("filter")?void 0:!1}}})}t.find("a").on("click",function(t){t.preventDefault();var a=e(this),n=a.data("filter");a.closest("li").addClass("selected").siblings().removeClass("selected"),i.size()>0&&i.isotope({filter:n})}),t.find("a span").on("click",function(e){e.stopPropagation()})}},loadMoreGallery:function(){var t=this;e(a).on("click",".basement-load-more",function(a){a.preventDefault();var i=e(this),n=i.data("all"),s=i.data("need"),r=i.data("tiles"),o=i.data("load"),l=i.data("grid"),c=e(i.attr("href")),d=i.data("type"),u=basement_gallery_ajax.url,f={need:s,tiles:r.toString(),load:o,grid:l};i.addClass("basement-loading").button("loading"),u&&e.ajax({type:"POST",url:u,data:{action:"load-more-tiles",data:f},success:function(a){if(i.removeClass("basement-loading").button("reset").blur(),a.html){var s=e(a.html);a.load&&i.data("load",a.load),"masonry"===d?(s.find("img").addClass("basement-img-hidden"),c.append(s),c.imagesLoaded().always(function(){s.find("img").removeClass("basement-img-hidden"),c.isotope("insert",s)})):c.mixItUp("append",s),t.magnificPopup(),n===c.children(".mix").size()&&i.fadeOut().slideUp()}else i.fadeOut().slideUp()}})})},convertHTML:function(t){var a=e.trim(t),i=e(a),n=e();return i.each(function(e,t){1===t.nodeType&&(n=n.add(this))}),n},stretchGrid:function(){var t=e(".basement-gallery-carousel-row, .basement-gallery-wrap-block, .basement-gallery-top-bar, .basement-gallery-carousel-title ");t.each(function(){var t=parseInt(e(this).css("margin-left"),10),a=e(this).next(".full-width-basement"),i=-1-a.offset().left-t;"fullwidth"===e(this).data("grid-size")&&e(this).css({width:r.width()+2,position:"relative",left:i,"box-sizing":"border-box"}).addClass("basement-stretched")})},stretchControls:function(a){for(var i=a.closest(".basement-gallery-carousel-row"),n=i.data("grid-size"),s=i.next(".full-width-basement"),r=i.find(".full-width-basement-help-row"),o=i.closest(".basement-gallery-carousel-container"),l=[".basement-gallery-carousel-inline-controls",".basement-gallery-carousel-merge-controls",".basement-gallery-carousel-dots-controls",".basement-gallery-carousel-arrows-controls"],c=0;c<l.length;c++){var d=o.children(l[c]),u=!1;if(!d.size()>0&&(d=o.find(l[c]),u=!0),d.size()>0&&"fullwidth"===n){var f,m=parseInt(d.css("margin-left"),10);u&&"strow"===n?(f=-1-r.offset().left-m,d.css({width:e(t).width(),left:f,position:"relative","box-sizing":"border-box"})):u||"fullwidth"!==n||(f=-1-s.offset().left-m,d.css({width:e(t).width(),left:f,position:"relative","box-sizing":"border-box"}))}}},findMinControls:function(){var t,a=this,i=e(".basement-gallery-carousel-inline-controls");i.size()>0&&e.each(i,function(){var i=e(this),n=i.children("div");n.size()>=2&&(t=a.findMinElement(i),e.each(n,function(){return e(this).outerHeight(!0)===t?(e(this).addClass("basement-vertical-controls"),!1):void 0}))})},outsideSideCarouselArrows:function(){var a=e(".basement-gallery-carousel-arrow-outside.basement-gallery-carousel-arrow-side");a.size()>0&&e.each(a,function(){{var a=e(this),i=a.closest(".basement-gallery-carousel-help-row").next(".full-width-basement-help-row"),n=parseInt(a.css("margin-left"),10),s=(parseInt(a.css("margin-right"),10),0-i.offset().left-n);r.width()}a.css({width:e(t).width(),left:s,"box-sizing":"border-box"})})},insideSideCarouselArrows:function(){var a=e(".basement-gallery-carousel-arrow-inside.basement-gallery-carousel-arrow-side");a.size()>0&&e.each(a,function(){var a,i,n=e(this),s=n.closest(".basement-gallery-carousel-help-row").next(".full-width-basement-help-row"),o=parseInt(n.css("margin-left"),10),l=(parseInt(n.css("margin-right"),10),0-s.offset().left-o),c=(r.width(),n.closest(".basement-gallery-carousel-help-row").outerWidth(!0)),d=n.children("a").outerWidth(!0);a=Math.floor((r.width()-c)/2),i=Math.floor((a-d)/2),n.css({width:e(t).width(),left:l,"box-sizing":"border-box"}),c<=r.width()&&setTimeout(function(){n.css({paddingLeft:0>=i?0:i+"px",paddingRight:0>=i?0:i+"px"})},100)})},numberCheck:function(e){return!isNaN(e)&&parseInt(Number(e))==e&&!isNaN(parseInt(e,10))},findMinElement:function(t){return Math.min.apply(Math,t.children("div").map(function(){return e(this).outerHeight(!0)}))},findMaxElement:function(t){return Math.max.apply(Math,t.children("div").map(function(){return e(this).outerHeight(!0)}))},initBasementGalleryCarousel:function(t){var a=this;try{t.size()>0&&e.each(t,function(){var t=e(this),i=t.data("basement-params"),n=t.data("basement-total"),s=e(n),o=i.hasOwnProperty("pagination")&&i.pagination.hasOwnProperty("container")?i.pagination.container:null,l=function(e){s.find(".basement-gallery-carousel-paginate-all").text(e)},c=function(e){s.find(".basement-gallery-carousel-paginate-current").text(e)},d={pagination:{anchorBuilder:function(e){return'<a href="#" class="basement-item-pag"><span>'+e+"</span></a>"},container:o},onCreate:function(e){if(r.on("resize",function(){setTimeout(function(){var e=i.height,n=a.numberCheck(e),s=a.findMaxElement(t);n?s>=e&&t.trigger("configuration",{height:"auto"}):"auto"===e&&t.trigger("configuration",{height:s}),a.insideSideCarouselArrows(),a.outsideSideCarouselArrows(),a.findMinControls(),a.stretchControls(t)},100)}).trigger("resize"),s.size()>0){var n=e.items.prevObject.length;n>1?(l(n),c(t.triggerHandler("currentPosition")+1)):s.hide()}a.insideSideCarouselArrows(),a.outsideSideCarouselArrows(),a.findMinControls(),a.stretchControls(t)}};s.size()>0&&(i.scroll.onBefore=function(){c(t.triggerHandler("currentPosition")+1)}),e.extend(i,d),t.carouFredSel(i)})}catch(i){console.log(i+'\nBasement Gallery detect error. Please Turn off plugin "Basement Gallery" and please write a message to our support team. Thx!')}},getCookie:function(e){var t=a.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}},e.fn[n]=function(t){return this.each(function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new i(this,t))})}}(jQuery,window,document),jQuery(document).ready(function(e){e(document.body).BasementGallery()});