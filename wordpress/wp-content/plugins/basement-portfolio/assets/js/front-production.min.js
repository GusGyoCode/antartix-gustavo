!function(e,t,i){"use strict";function a(t,a){var o=this;o.element=e(t),o.options=e.extend({},n,a),r.on("load",function(){o.stretchGrid(),o.initBasementGalleryCarousel(l,c),o.loadMoreGallery(),o.featuredCarousel(),o.magnificPopup(),e(".basement-portfolio-header").each(function(){e(this).find(".col-md-4").size()>0&&e(this).find(".col-md-4").each(function(){(""==e(this).html()||e(this).is(":empty"))&&e(this).addClass("basement-portfolio-cell-empty")})}),s.on("click",".basement-gallery-tiles_type-classic.basement-portfolio-wrapper .figure",function(){!e(this).children("a").size()>0&&e(this).parent("div").find("a").trigger("click")}),e(i).on("click",".classic-helpers-icons a.icon-arr",function(){e(this).closest("h5").children("a").trigger("click")}),o.initGallery(),o.isotopeMix(),o.selectPortfolio()}).on("resize",function(){o.stretchGrid()}).on("scroll",function(){})}var o="BasementPortfolio",r=e(t),s=e(i),n={},l=e(".project-gallery-wrap .basement-gallery-carousel"),c={};a.prototype={selectPortfolio:function(){e(".basement-portfolio-cat-select").chosen({disable_search:!0,disable_search_threshold:4,width:211})},initGallery:function(){var t=e(".basement-portfolio-nav-category"),i=e(".basement-portfolio-mix-list"),a=e(".basement-portfolio-isotope-list");if(t.size()>0){if(i.size()>0){mixitup(i,{callbacks:{onMixClick:function(t,i){var a=e(i.target);return a.hasClass("filter")?void 0:!1}}})}e(".basement-portfolio-sorting select").on("change",function(){var t=e(this).val();i.mixItUp("sort",t,!0)}).change(),t.find("a").on("click",function(t){t.preventDefault();var i=e(this),o=i.data("filter");i.closest("li").addClass("selected").siblings().removeClass("selected"),a.size()>0&&a.isotope({filter:o})})}},magnificPopup:function(){s.find(".basement-portfolio-wrapper, .basement-gallery-carousel-project-wrap-block").each(function(){var t=e(this);t.find(".magnific").magnificPopup({type:"image",tLoading:"",gallery:{enabled:!0,tCounter:'<span class="mfp-counter">%curr% &mdash; %total%</span>',navigateByImgClick:!0},fixedContentPos:!1,callbacks:{open:function(){e("body").addClass("noscroll")},close:function(){e("body").removeClass("noscroll")}},image:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><div class="mfp-top-bar"></div><div class="mfp-img"></div><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></div>',titleSrc:function(e){return e.el.data("title")}}})})},insideFeatureSideCarouselArrows:function(){var i=e(".basement-feature-arrs");i.size()>0&&e.each(i,function(){var i,a,o=e(this),s=o.closest(".basement-feature-carousel-wrap-block").find(".full-width-basement-feature"),n=parseInt(o.css("margin-left"),10),l=(parseInt(o.css("margin-right"),10),0-s.offset().left-n),c=(r.width(),o.closest(".basement-feature-carousel-wrap-block").outerWidth(!0)),d=o.children("a").outerWidth(!0);i=Math.floor((r.width()-c)/2),a=Math.floor((i-d)/2),o.css({width:e(t).width(),left:l,"box-sizing":"border-box"}),c<=r.width()&&setTimeout(function(){o.css({paddingLeft:0>=a?0:a+"px",paddingRight:0>=a?0:a+"px"})},100)})},featuredCarousel:function(){var t=e(".basement-project-featured-slider");t.each(function(){var t=e(this),i=t.closest(".basement-project-featured").find(".basement-project-featured-left"),a=t.closest(".basement-project-featured").find(".basement-project-featured-right");t.carouFredSel({responsive:!0,auto:!1,height:"variable",width:"auto",items:{height:"variable",width:500,visible:{min:1,max:4}},swipe:{onTouch:!0,onMouse:!0},prev:i,next:a,scroll:{fx:"scroll"}})})},isotopeMix:function(){var i=e(".basement-portfolio-isotope-list"),a=e(".basement-portfolio-nav-category");if(i.size()>0){var o=""!==t.location.hash?t.location.hash:"#all";a.find("a").parent().removeClass("selected"),a.find('a[href="'+o+'"]').parent().addClass("selected"),o="#all"==o?"*":o.replace("#","."),"*"===o&&i.css("opacity",1),setTimeout(function(){"*"!==o&&i.css("opacity",1);var t=i.isotope({itemSelector:".mix",layoutMode:"masonry",transitionDuration:"0.3s",percentPosition:!0,filter:o,getSortData:{category:"[data-category]",name:"[data-name]",date:function(t){var i=e(t).data("published-date");if(i){var a=i.split("-"),o=a[0],r=a[1],s=a[2];return new Date(o,r,s)}return!1}}});e(".sorting-masonry select").on("change",function(){var i=e(this),a=i.val();t.isotope({sortBy:a})}).change()},300)}},loadMoreGallery:function(){var t=this;s.on("click",".btn-basement-portfolio-load-more",function(i){i.preventDefault();var a=e(this),o=a.data("all"),r=a.data("need"),s=a.data("tiles"),n=a.data("load"),l=a.data("grid"),c=e(a.attr("href")),d=a.data("type"),f=basement_portfolio_ajax.url,u={need:r,tiles:s.toString(),load:n,grid:l};a.button("loading"),f&&e.ajax({type:"POST",url:f,data:{action:"load-more-projects",data:u},success:function(i){if(a.button("reset").blur(),i.html){var r=e(i.html);i.load&&a.data("load",i.load),"masonry"===d?(r.find("img").addClass("basement-img-hidden"),c.append(r),c.imagesLoaded().always(function(){r.find("img").removeClass("basement-img-hidden"),c.isotope("insert",r)})):c.mixItUp("append",r),t.magnificPopup(),o===c.children(".mix").size()&&a.fadeOut().slideUp()}else a.fadeOut().slideUp()}})})},convertHTML:function(t){var i=e.trim(t),a=e(i),o=e();return a.each(function(e,t){1===t.nodeType&&(o=o.add(this))}),o},stretchGrid:function(){var t=e(".basement-gallery-carousel-row, .basement-gallery-wrap-block, .basement-project-featured, .basement-gallery-top-bar");t.each(function(){var t=parseInt(e(this).css("margin-left"),10),i=parseInt(e(this).css("margin-right"),10),a=e(this).next(".full-width-basement"),o=-1-a.offset().left-t,s=r.width()+2;if("fullwidth"===e(this).data("grid-size"))e(this).css({width:s,position:"relative",left:o,"box-sizing":"border-box"}).addClass("basement-stretched");else if("strow"===e(this).data("grid-size")){var n=-1*o;0>n&&(n=0);var l=s-n-a.width()+t+i;0>l&&(l=0),e(this).css({width:s,left:o,position:"relative","box-sizing":"border-box","padding-left":n,"padding-right":l})}})},stretchControls:function(i){for(var a=i.closest(".basement-gallery-carousel-row"),o=a.data("grid-size"),r=a.next(".full-width-basement"),s=a.find(".full-width-basement-help-row"),n=a.closest(".basement-gallery-carousel-container"),l=[".basement-gallery-carousel-inline-controls",".basement-gallery-carousel-merge-controls",".basement-gallery-carousel-dots-controls",".basement-gallery-carousel-arrows-controls",".basement-gallery-carousel-title"],c=0;c<l.length;c++){var d=n.children(l[c]),f=!1;if(!d.size()>0&&(d=n.find(l[c]),f=!0),d.size()>0&&"fullwidth"===o){var u,h=parseInt(d.css("margin-left"),10);f&&"strow"===o?(u=-1-s.offset().left-h,d.css({width:e(t).width(),left:u,position:"relative","box-sizing":"border-box"})):f||"fullwidth"!==o||(u=-1-r.offset().left-h,d.css({width:e(t).width(),left:u,position:"relative","box-sizing":"border-box"}))}}},findMinControls:function(){var t,i=this,a=e(".basement-gallery-carousel-inline-controls");a.size()>0&&e.each(a,function(){var a=e(this),o=a.children("div");o.size()>=2&&(t=i.findMinElement(a),e.each(o,function(){return e(this).outerHeight(!0)===t?(e(this).addClass("basement-vertical-controls"),!1):void 0}))})},outsideSideCarouselArrows:function(){var i=e(".basement-gallery-carousel-arrow-outside.basement-gallery-carousel-arrow-side");i.size()>0&&e.each(i,function(){{var i=e(this),a=i.closest(".basement-gallery-carousel-help-row").next(".full-width-basement-help-row"),o=parseInt(i.css("margin-left"),10),s=(parseInt(i.css("margin-right"),10),0-a.offset().left-o);r.width()}i.css({width:e(t).width(),left:s,"box-sizing":"border-box"})})},insideSideCarouselArrows:function(){var i=e(".basement-gallery-carousel-arrow-inside.basement-gallery-carousel-arrow-side");i.size()>0&&e.each(i,function(){var i,a,o=e(this),s=o.closest(".basement-gallery-carousel-help-row").next(".full-width-basement-help-row"),n=parseInt(o.css("margin-left"),10),l=(parseInt(o.css("margin-right"),10),0-s.offset().left-n),c=(r.width(),o.closest(".basement-gallery-carousel-help-row").outerWidth(!0)),d=o.children("a").outerWidth(!0);i=Math.floor((r.width()-c)/2),a=Math.floor((i-d)/2),o.css({width:e(t).width(),left:l,"box-sizing":"border-box"}),c<=r.width()&&setTimeout(function(){o.css({paddingLeft:0>=a?0:a+"px",paddingRight:0>=a?0:a+"px"})},100)})},numberCheck:function(e){return!isNaN(e)&&parseInt(Number(e))==e&&!isNaN(parseInt(e,10))},findMinElement:function(t){return Math.min.apply(Math,t.children("div").map(function(){return e(this).outerHeight(!0)}))},findMaxElement:function(t){return Math.max.apply(Math,t.children("div").map(function(){return e(this).outerHeight(!0)}))},initBasementGalleryCarousel:function(t){var i=this;try{t.size()>0&&e.each(t,function(){var t=e(this),a=t.data("basement-params"),o=t.data("basement-total"),s=e(o),n=function(e){s.find(".basement-gallery-carousel-paginate-all").text(e)},l=function(e){s.find(".basement-gallery-carousel-paginate-current").text(e)},c={onCreate:function(e){if(r.on("resize",function(){setTimeout(function(){var e=a.height,o=i.numberCheck(e),r=i.findMaxElement(t);o?r>=e&&t.trigger("configuration",{height:"auto"}):"auto"===e&&t.trigger("configuration",{height:r}),i.insideSideCarouselArrows(),i.outsideSideCarouselArrows(),i.findMinControls(),i.stretchControls(t)},100)}).trigger("resize"),s.size()>0){var o=e.items.prevObject.length;o>1?(n(o),l(t.triggerHandler("currentPosition")+1)):s.hide()}i.insideSideCarouselArrows(),i.outsideSideCarouselArrows(),i.findMinControls(),i.stretchControls(t)}};s.size()>0&&(a.scroll.onBefore=function(){l(t.triggerHandler("currentPosition")+1)}),e.extend(a,c),t.carouFredSel(a)})}catch(a){console.log(a+'\nBasement Portfolio detect error. Please Turn off plugin "Basement Portfolio" and please write a message to our support team. Thx!')}},getCookie:function(e){var t=i.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}},e.fn[o]=function(t){return this.each(function(){e.data(this,"plugin_"+o)||e.data(this,"plugin_"+o,new a(this,t))})}}(jQuery,window,document),jQuery(document).ready(function(e){e(document.body).BasementPortfolio()});