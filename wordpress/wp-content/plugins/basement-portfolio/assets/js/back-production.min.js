!function(e,t,a){"use strict";function i(){var e=this;s.on("load",function(){e.titleGallery(),e.positionTopElements(),e.tilesTypeGallery(),e.gridTypeGallery(),e.loadMoreGallery(),e.metaboxGallery(),e.builderArrowDots(),e.customFields(),e.typeGallery(),e.featuredWorks(),e.pagination(),e.marginValue()}).on("resize",function(){}).on("scroll",function(){})}var s=e(t),o=e(a),n={dots:{inside:{top:"-26px",bottom:"-26px",left:"0px",center:{left:"50%",marginLeft:"-24px"},right:"0px"},outside:{top:"-72px",bottom:"-72px",left:"0px",center:{left:"50%",marginLeft:"-24px"},right:"0px"}},arrow:{inside:{top:"-27px",bottom:"-27px",left:"0px",center:{left:"50%",marginLeft:"-17px"},right:"0px",side:{marginLeft:"-35px",marginRight:"-35px",left:"0px",right:"0px",marginTop:"-6px",top:"50%"}},outside:{top:"-72px",bottom:"-72px",left:"0px",center:{left:"50%",marginLeft:"-17px"},right:"0px",side:{marginLeft:"-60px",marginRight:"-60px",left:"0px",right:"0px",marginTop:"-6px",top:"50%"}},inrow:{marginTop:"-6px",top:"50%",width:"100%"}}},l=!1;i.prototype={pagination:function(){var t=e("#basement_pagination_shoose"),a=t.find("input:radio"),i=t.find("input:radio:checked").not(":disabled").val(),s="yes";i===s&&e(".basement_pagination_settings").addClass("active"),a.on("click",function(){e(this).val()===s?e(".basement_pagination_settings").addClass("active"):e(".basement_pagination_settings").removeClass("active")})},featuredWorks:function(){var t=e(".basement-featured-works");t.each(function(){function t(){l=[],n.val(""),s.children("div").each(function(){l.push(e(this).data("post"))}),n.val(l.join()).trigger("change")}var a=e(this),i=a.find(".basement-featured-source-sortable"),s=a.find(".basement-featured-feature-sortable"),n=a.find(".projects-ids"),l=[];n.val().length>0&&(l=n.val().split(",")),o.on("click",".basement-source-remove",function(t){t.preventDefault();{var a=e(this),i=a.closest(".basement-featured-item"),o=i.data("post");i.clone().appendTo(s)}i.remove(),l.push(o),n.val(l.join()).trigger("change")}),o.on("click",".basement-featured-remove",function(a){a.preventDefault();var s=e(this),o=s.closest(".basement-featured-item");i.children("p").remove();o.clone().appendTo(i);o.remove(),t()}),s.sortable({axis:"y",cursor:"move",placeholder:"ui-state-highlight",handle:".basement-featured-move",update:function(){t()}}).disableSelection()})},typeGallery:function(){var t=e("#js-gallery-choose"),a=t.find("input:radio"),i=t.find("input:radio:checked").not(":disabled").val();e("#"+i).addClass("active"),a.on("click",function(){e("#"+e(this).val()).addClass("active").siblings("video_gallery_type"===e(this).val()?"#image_gallery_type":"#video_gallery_type").removeClass("active")})},customFields:function(){function a(t){t.children("div").each(function(){var t=e(this),a=t.index()+1,i=t.find(".basement-snap-field").data("name");t.attr("data-id",a),t.find(".basement-snap-field").attr("name",i+"["+a+"]").trigger("change")})}function i(t){var i=t.closest(".basement_custom-fields-block"),s=i.find(".basement_custom-fields-ids");d=[],s.val(""),t.children("div").each(function(){d.push(e(this).data("field"))}),a(t),s.val(d.join()).trigger("change")}function s(t){var i=new Date,s=i.getSeconds(),o="field-"+s+Math.random().toString(36).substr(2,9);t.find(".basement-snap-field").val(o).attr("value",o).trigger("change"),t.find(".fast-edit-custom-fields input, .fast-edit-custom-fields select, .fast-edit-custom-fields textarea").each(function(){e(this).attr("name","_basement_meta_project_"+o+"[]")}),a(t.closest(".basement_custom-fields-sortable"))}var n=e(".basement_custom-fields-block"),l=e(".basement_custom-fields-select"),d=[];n.each(function(){var t=e(this);t.find(".basement_custom-fields-sortable").each(function(){e(this).sortable({axis:"y",cursor:"move",placeholder:"ui-state-highlight",handle:".custom-field-handle",update:function(){i(e(this))}}).disableSelection()}),t.find(".basement_custom-fields-ids").val().length>0&&(d=t.find(".basement_custom-fields-ids").val().split(","))}),o.on("click",".custom-field-remove",function(a){a.preventDefault();var s=t.confirm("Are you sure?"),o=e(this).closest(".basement_custom-fields-sortable"),n=e(this).closest(".ui-state-default");s&&ajaxurl&&(n.addClass("load"),n.removeClass("load").delay(500).remove(),i(o),n.hasClass("is-static")&&(o.addClass("load"),e.ajax({type:"POST",url:ajaxurl,data:{action:"remove-custom-field",data:{post_id:n.data("post"),index:n.data("id"),field:n.data("field"),ids:o.closest(".basement_custom-fields-block").find(".basement_custom-fields-ids").val(),value:n.find(".basement-snap-field").val()}},success:function(){o.removeClass("load")}})))}),o.on("click",".custom-field-edit",function(t){t.preventDefault();var a=e(this),i=a.closest(".ui-state-default"),s=i.find(".custom-field-handle"),o=i.find(".custom-field-remove"),n=i.find(".fast-edit-custom-fields");a.hasClass("edited")?(a.removeClass("edited"),a.text("Edit"),o.removeClass("disable-block"),s.removeClass("disable-block"),n.slideUp("slow")):(a.addClass("edited"),a.text("Close"),o.addClass("disable-block"),s.addClass("disable-block"),n.slideDown("slow"))}),l.on("change",function(){var t=e(this),a=t.find("option:selected"),i=a.val(),o=a.data("type"),n=a.data("slug"),l=a.text(),r=e(t.data("fields")),c=e('div[data-templates="'+t.data("fields").slice(1)+'"]'),f=c.find(".field-"+o),p=t.closest(".basement_custom-fields-block"),u=p.find(".basement_custom-fields-ids");if(i&&f.size()>0){var m=f.clone().appendTo(r);m.attr("data-field",i),m.find(".custom-field-title").text(l),s(m,i,o,n,l),d.push(i),u.val(d.join()).trigger("change"),t.prop("selectedIndex",0)}})},metaboxGallery:function(){function t(t){var a=t.closest(".basement_gallery-block").find(".basement_gallery_ids");n=[],a.val(""),t.children("li").each(function(){n.push(e(this).data("slide"))}),a.val(n.join()).trigger("change")}function a(e){var t=e.gallery,a=e.url,i=e.id,s=e.button,o=s.closest(".basement_gallery-block").find(".basement_gallery_ids");n.push(i),o.val(n.join()).trigger("change"),t.append('<li data-slide="'+i+'" class="ui-state-default"><span class="basement_gallery-helper"></span><a href="#" class="basement_gallery-slide-del" title="">&times;</a><img src="'+a+'" alt=""></li>')}var i=e(".basement_gallery-add-slide"),s=e(".basement_gallery-block"),n=[];s.each(function(){var a=e(this),i=a.find(".basement_gallery-slides"),s=a.find(".basement_gallery_ids");s.size()>0&&s.val()&&(n=s.val().split(",")),i.sortable({placeholder:"ui-state-highlight",cursor:"move",update:function(){t(i)}}),i.disableSelection()}),o.on("click",".basement_gallery-slide-del",function(a){a.preventDefault();var i=e(this).closest(".basement_gallery-slides");e(this).closest("li").remove(),t(i)}),i.on("click",function(t){var i=e(this),s=e(this).data("library-type"),o=e(this).data("frame-title"),n=e(this).data("button-text");s||(s="image"),o||(o="Choose"),n||(n="Update"),t.preventDefault();var l=null;return l=wp.media.frames.customHeader=wp.media({title:o,button:{text:n},multiple:"add"}),l.on("select",function(){var t=l.state().get("selection");t.map(function(t){var s=t.toJSON(),o=s.id,n=s.url;a({id:o,url:n,gallery:e(i.attr("href")),button:i})})}),l.open(),!1})},loadMoreGallery:function(){var t=e("#js-load-more-choose"),a=t.find("input:radio"),i=t.find("input:radio:checked").not(":disabled").val(),s="yes";i===s&&e("#load_more_yes").addClass("active"),a.on("click",function(){e(this).val()===s?e("#load_more_yes").addClass("active"):e("#load_more_yes").removeClass("active")})},gridTypeGallery:function(){var t=e("#js-grid-type-choose"),a=t.find("input:radio"),i=t.find("input:radio:checked").not(":disabled").val(),s="masonry",o="mixed";(i===s||i===o)&&(e("#_basement_meta_portfolio_grid_tiles_height").prop({readonly:!0,disabled:!0}),e("#layer_mode_show_yes").addClass("active")),a.on("click",function(){e(this).val()===s||e(this).val()===o?(e("#_basement_meta_portfolio_grid_tiles_height").prop({readonly:!0,disabled:!0}),e("#layer_mode_show_yes").addClass("active")):(e("#_basement_meta_portfolio_grid_tiles_height").prop({readonly:!1,disabled:!1}),e("#layer_mode_show_yes").removeClass("active"))})},tilesTypeGallery:function(){var t=e("#js-tiles-type-choose"),a=t.find("input:radio"),i=t.find("input:radio:checked").not(":disabled").val(),s="classic";i===s&&(e("#_basement_meta_portfolio_grid_margins_yes").prop("checked",!0),e("#_basement_meta_portfolio_grid_margins_no").prop("disabled",!0),e("#header_position").addClass("active")),a.on("click",function(){e(this).val()===s?(e("#_basement_meta_portfolio_grid_margins_yes").prop("checked",!0),e("#_basement_meta_portfolio_grid_margins_no").prop("disabled",!0),e("#header_position").addClass("active")):(e("#_basement_meta_portfolio_grid_margins_no").prop("disabled",!1),e("#header_position").removeClass("active"))})},marginValue:function(){var t=e("#js-margin-value-choose"),a=t.find("input:radio"),i=t.find("input:radio:checked").not(":disabled").val(),s="yes";i===s&&e("#margin_value_mode_show_yes").addClass("active"),a.on("click",function(){e(this).val()===s?e("#margin_value_mode_show_yes").addClass("active"):e("#margin_value_mode_show_yes").removeClass("active")})},positionTopElements:function(){function t(e){for(var t,a,i=arguments,s=i.length;s>1&&e.length;)for(t=i[--s];-1!==(a=e.indexOf(t));)e.splice(a,1);return e}var a=e(".basement_position-compare");a.on("change",function(){var a=e(this),i=a.val(),s=["left","center","right"],o=a.closest(".basement_html_param-setting").siblings();t(s,i),o.find(".basement_position-compare:checked").each(function(){for(var a=0;a<=s.length;a++)s[a]===e(this).val()&&t(s,e(this).val())}),s&&o.find('.basement_position-compare[value="'+i+'"]:checked').closest(".basement_form_radios").find('.basement_position-compare[value="'+s[0]+'"]').prop({checked:!0})})},titleGallery:function(){var t=e("#js-title-choose"),a=t.find("input:radio"),i=t.find("input:radio:checked").not(":disabled").val(),s="yes";i===s&&e("#title_show_yes, #titlegrid").addClass("active"),a.on("click",function(){e(this).val()===s?e("#title_show_yes, #titlegrid").addClass("active"):e("#title_show_yes, #titlegrid").removeClass("active")})},dotsMove:function(t,a,i,s){var o=this,l={},d={position:"inside",y:"bottom",x:"center"},r=!1;e.map(t.find("input:radio:checked").not(":disabled"),function(t){var a=e(t).data("control"),i=e(t).val();"type"===a&&"nope"===i&&(r=!0),("position"===a||"y"===a||"x"===a)&&(d[a]=i)});for(var c in d){var f=d[c],p=c;switch(p){case"y":case"x":if("center"===f)for(var u in n.dots[d.position][f])l[u]=n.dots[d.position][f][u];else l[f]=n.dots[d.position][f]}}a.hide().attr("style","").css(l).fadeIn(),r?e(".layout-nav-builder").hide():e(".layout-nav-builder").show();var m=o.checkPosition(d,"#js-arrowSettings");m?(a.hide(),s.hide(),"center"===d.x&&(l.marginLeft="-41px"),i.css(l).show()):(i.attr("style","").hide(),s.show())},radioDisabled:function(t){e.map(t.find("input:radio:checked"),function(a){var i=e(a).data("control"),s=e(a).val();switch(i){case"position":"inrow"===s?(t.find('input:radio[data-control="y"]').prop("disabled",!0),t.find('input:radio[data-control="x"]').prop("disabled",!0),l=!0):(t.find('input:radio[data-control="y"]').prop("disabled",!1),l=!1);break;case"y":"side"===s?t.find('input:radio[data-control="x"]').prop("disabled",!0):l||t.find('input:radio[data-control="x"]').prop("disabled",!1)}})},checkPosition:function(t,a){var i=e(a),s={};e.map(i.find("input:radio:checked").not(":disabled"),function(t){var a=e(t).data("control"),i=e(t).val();("position"===a||"y"===a||"x"===a)&&(s[a]=i)});var o=JSON.stringify(t),n=JSON.stringify(s);return o===n},arrowMove:function(t,a,i,s){var o=this,l={},d={},r=!1;o.radioDisabled(t),e.map(t.find("input:radio:checked").not(":disabled"),function(t){var a=e(t).data("control"),i=e(t).val();"type"===a&&"nope"===i&&(r=!0),("position"===a||"y"===a||"x"===a)&&(d[a]=i)});for(var c in d){var f=d[c],p=c;switch(p){case"position":if("inrow"===f)for(var u in n.arrow[f])l[u]=n.arrow[f][u];break;case"x":case"y":if("side"===f||"center"===f)for(var m in n.arrow[d.position][f])l[m]=n.arrow[d.position][f][m];else l[f]=n.arrow[d.position][f]}}a.hide().attr("style","").css(l).fadeIn(),r?e(".layout-arrow-left, .layout-arrow-right").hide():e(".layout-arrow-left, .layout-arrow-right").show();var h=o.checkPosition(d,"#js-dotsSettings");h?(a.hide(),s.hide(),"center"===d.x&&(l.marginLeft="-41px"),i.css(l).show()):(i.attr("style","").hide(),s.show())},builderArrowDots:function(){var t=this,a=e("#js-arrowSettings"),i=e(".layout-arrows-builder"),s=e("#js-dotsSettings"),o=e(".layout-dots-arrows-builder"),n=e(".layout-dots-builder");t.arrowMove(a,i,o,n),a.find("input:radio").on("click",function(){t.arrowMove(a,i,o,n)}),t.dotsMove(s,n,o,i),s.find("input:radio").on("click",function(){t.dotsMove(s,n,o,i)})}},new i}(jQuery,window,document);