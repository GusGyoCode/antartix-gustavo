!function(e,t,i){"use strict";function a(){var e=this;o.on("load",function(){e.selectChooseInput(),e.stretch("[data-stretch]"),e.previewCarouselGenerate(),e.metaboxTabs(),e.builderArrowDots(),e.arrowPreviewInsideSide()}).on("resize",function(){e.stretch("[data-stretch]"),e.arrowPreviewInsideSide()}).on("scroll",function(){})}var o=e(t),r=(e(i),{dots:{inside:{top:"-26px",bottom:"-26px",left:"0px",center:{left:"50%",marginLeft:"-24px"},right:"0px"},outside:{top:"-72px",bottom:"-72px",left:"0px",center:{left:"50%",marginLeft:"-24px"},right:"0px"}},arrow:{inside:{top:"-27px",bottom:"-27px",left:"0px",center:{left:"50%",marginLeft:"-17px"},right:"0px",side:{marginLeft:"-35px",marginRight:"-35px",left:"0px",right:"0px",marginTop:"-6px",top:"50%"}},outside:{top:"-72px",bottom:"-72px",left:"0px",center:{left:"50%",marginLeft:"-17px"},right:"0px",side:{marginLeft:"-60px",marginRight:"-60px",left:"0px",right:"0px",marginTop:"-6px",top:"50%"}},inrow:{marginTop:"-6px",top:"50%",width:"100%"}}}),n=!1;a.prototype={arrowPreviewInsideSide:function(){var t=e("#preview-arrows");if(t.size()>0&&t.hasClass("preview-position-inside preview-vertical-side")){var i,a,o=e(".carousel-area"),r=o.width(),n=e(".builder-work-row"),s=n.outerWidth(),d=t.children("a").width();i=Math.floor((r-s)/2),a=Math.floor((i-d)/2),r>=s&&setTimeout(function(){t.css({paddingLeft:0>=a?0:a+"px",paddingRight:0>=a?0:a+"px"})},100)}},dotsMove:function(t,i,a,o){var n=this,s={},d={position:"inside",y:"bottom",x:"center"},c=!1;e.map(t.find("input:radio:checked").not(":disabled"),function(t){var i=e(t).data("control"),a=e(t).val();"type"===i&&"nope"===a&&(c=!0),("position"===i||"y"===i||"x"===i)&&(d[i]=a)});for(var l in d){var p=d[l],f=l;switch(f){case"y":case"x":if("center"===p)for(var u in r.dots[d.position][p])s[u]=r.dots[d.position][p][u];else s[p]=r.dots[d.position][p]}}i.hide().attr("style","").css(s).fadeIn(),c?e(".layout-nav-builder").hide():e(".layout-nav-builder").show();var h=n.checkPosition(d,"#js-arrowSettings");h?(i.hide(),o.hide(),"center"===d.x&&(s.marginLeft="-41px"),a.css(s).show()):(a.attr("style","").hide(),o.show())},radioDisabled:function(t){e.map(t.find("input:radio:checked"),function(i){var a=e(i).data("control"),o=e(i).val();switch(a){case"position":"inrow"===o?(t.find('input:radio[data-control="y"]').prop("disabled",!0),t.find('input:radio[data-control="x"]').prop("disabled",!0),n=!0):(t.find('input:radio[data-control="y"]').prop("disabled",!1),n=!1);break;case"y":"side"===o?t.find('input:radio[data-control="x"]').prop("disabled",!0):n||t.find('input:radio[data-control="x"]').prop("disabled",!1)}})},checkPosition:function(t,i){var a=e(i),o={};e.map(a.find("input:radio:checked").not(":disabled"),function(t){var i=e(t).data("control"),a=e(t).val();("position"===i||"y"===i||"x"===i)&&(o[i]=a)});var r=JSON.stringify(t),n=JSON.stringify(o);return r===n},arrowMove:function(t,i,a,o){var n=this,s={},d={},c=!1;n.radioDisabled(t),e.map(t.find("input:radio:checked").not(":disabled"),function(t){var i=e(t).data("control"),a=e(t).val();"type"===i&&"nope"===a&&(c=!0),("position"===i||"y"===i||"x"===i)&&(d[i]=a)});for(var l in d){var p=d[l],f=l;switch(f){case"position":if("inrow"===p)for(var u in r.arrow[p])s[u]=r.arrow[p][u];break;case"x":case"y":if("side"===p||"center"===p)for(var h in r.arrow[d.position][p])s[h]=r.arrow[d.position][p][h];else s[p]=r.arrow[d.position][p]}}i.hide().attr("style","").css(s).fadeIn(),c?e(".layout-arrow-left, .layout-arrow-right").hide():e(".layout-arrow-left, .layout-arrow-right").show();var v=n.checkPosition(d,"#js-dotsSettings");v?(i.hide(),o.hide(),"center"===d.x&&(s.marginLeft="-41px"),a.css(s).show()):(a.attr("style","").hide(),o.show())},builderArrowDots:function(){var t=this,i=e("#js-arrowSettings"),a=e(".layout-arrows-builder"),o=e("#js-dotsSettings"),r=e(".layout-dots-arrows-builder"),n=e(".layout-dots-builder");t.arrowMove(i,a,r,n),i.find("input:radio").on("click",function(){t.arrowMove(i,a,r,n)}),t.dotsMove(o,n,r,a),o.find("input:radio").on("click",function(){t.dotsMove(o,n,r,a)})},metaboxTabs:function(){var t=e(".z_tabs-nav"),i=e("#basement-generate-preview"),a=i.data("id"),o=localStorage.getItem("tabLocal"+a)?localStorage.getItem("tabLocal"+a):"#";t.size()>0&&("#"!==o&&setTimeout(function(){t.find('a[href="'+o+'"]').trigger("click")},30),t.each(function(){var t=e(this);t.find("a").on("click",function(t){t.preventDefault(),e(this).parent("li").addClass("active").siblings().removeClass("active"),e(e(this).attr("href")).addClass("active").siblings().removeClass("active"),localStorage.setItem("tabLocal"+a,e(this).attr("href"))})}))},stretch:function(t){if(e(t).size()>0){var i=e(t);i.each(function(){var i=e(this),a=t.substring(6,t.length-1),o=i.data(a),r=i.next(".full-width-basement"),n=parseInt(i.css("margin-left"),10),s=parseInt(i.css("margin-right"),10),d=0-r.position().left-n,c=e(".carousel-area"),l=c.outerWidth();if(i.css({width:l,position:"relative",left:d,"box-sizing":"border-box"}),"strow"===o){var p=-1*d;0>p&&(p=0);var f=l-p-r.width()+n+s;0>f&&(f=0),i.css({"padding-left":p,"padding-right":f})}})}},numberCheck:function(e){return!isNaN(e)&&parseInt(Number(e))==e&&!isNaN(parseInt(e,10))},findMaxElement:function(t){return Math.max.apply(Math,t.children("li").map(function(){return e(this).outerHeight(!0)}))},previewCarouselGenerate:function(){var t=this,i=e("#basement-generate-preview"),a=e("#basement-close-preview"),r=e("#preview-basement-carousel"),n=r.data("params-preview"),s=e("#carousel-preview-meta-box"),d=i.data("id"),c=e(r.data("total")),l=function(e){c.find(".preview-all").text(e)},p=function(e){c.find(".preview-current").text(e)},f=localStorage.getItem("statusLocal"+d)?localStorage.getItem("statusLocal"+d):"false";"true"===f?(s.addClass("active-metabox"),a.removeClass("hidden"),i.addClass("hidden")):(s.removeClass("active-metabox"),i.removeClass("hidden"),a.addClass("hidden")),i.on("click",function(t){t.preventDefault();var i=e(this),o=i.attr("href");e(o).addClass("active-metabox"),a.removeClass("hidden"),i.addClass("hidden"),localStorage.setItem("statusLocal"+d,"true")}),a.on("click",function(t){t.preventDefault();var a=e(this),o=a.attr("href");e(o).removeClass("active-metabox"),a.addClass("hidden"),i.removeClass("hidden"),localStorage.setItem("statusLocal"+d,"false")}),r.size()>0&&r.each(function(){var i=e(this),a=e("#preview-paginate"),r={onCreate:function(e){if(o.on("resize",function(){setTimeout(function(){var e=n.height,a=t.numberCheck(e),o=t.findMaxElement(i);a?o>=e&&i.trigger("configuration",{height:"auto"}):"auto"===e&&i.trigger("configuration",{height:o})},100)}).trigger("resize"),a.hasClass("preview-type-number")){var r=e.items.prevObject.length;r>1?(l(r),p(i.triggerHandler("currentPosition")+1)):c.hide()}}};a.hasClass("preview-type-number")&&(n.scroll.onBefore=function(){p(i.triggerHandler("currentPosition")+1)}),e.extend(n,r),i.carouFredSel(n)})},getCookie:function(e){var t=i.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},selectChooseInput:function(){var t={"#_basement_meta_carousel_height":"js_basement_fixed_height","#_basement_meta_carousel_item_height":"js_basement_fixed_item_height"},i=function(t,i){t===i?e("#"+i).show():e("#"+i).hide().find("input").val("")};for(var a in t){var o=e(a),r=t[a],n=o.find("option:selected").val();o.size()>0&&(i(n,r),o.on("change",function(){var a=e(this),o=a.val(),r=t["#"+a.attr("id")];i(o,r)}))}}},new a}(jQuery,window,document);