!function(t,e,a){"use strict";function i(){var t=this;t.fillSmartSlides(),t.smartSlides()}var s=t(a),l=".carousel_slide_add",d=".carousel_slide_sortable",n=".carousel_slide_remove",r=".ui-state-default";i.prototype={fillSmartSlides:function(){var t=this,e=s.find(".carousel_slide_insert"),a=e.val(),i=s.find(d);if(a)for(var o=a.split(","),c=0;c<o.length;c++)if(i.size()>0){var u=o[c];if(o[c]){var f=s.find(l+' option[value="'+u+'"]'),v=f.text(),h='<strong class="carousel_slide_title">'+v+"</strong>",_='<a href="'+f.data("edit")+'" target="_blank" class="button-secondary button carousel_slide_edit" title="">'+f.data("edit-title")+"</a>",p='<a href="#" class="'+n.slice(1)+'" title=""><i class="fa fa-remove"></i></a>',m='<i class="fa fa-arrows carousel_slide_handle"></i>';f.remove(),t.isEmpty(i)&&i.addClass("activate"),i.append('<div class="'+r.slice(1)+' cf" data-id="'+u+'">'+h+m+p+_+"</div>"),t.updateSlides(i)}}},updateSlides:function(e){var a=this,i=s.find(".carousel_slide_insert"),l=[];!a.isEmpty(e)&&i.size()>0?(e.find(r).each(function(){l.push(t(this).data("id"))}),i.val(l.join()).attr("value",l.join()).trigger("change")):i.val("").attr("value","").trigger("change")},smartSlides:function(){var e=this,a=t(d);s.on("change",l,function(){var a=t(this),i=a.val(),l=a.find('option[value="'+i+'"]'),o=l.text(),c=l.data("edit"),u=l.data("edit-title"),f=s.find(d);if(f.size()>0&&i){var v='<strong class="carousel_slide_title">'+o+"</strong>",h='<a href="'+c+'" target="_blank" class="button-secondary button carousel_slide_edit" title="">'+u+"</a>",_='<a href="#" class="'+n.slice(1)+'" title=""><i class="fa fa-remove"></i></a>',p='<i class="fa fa-arrows carousel_slide_handle"></i>';e.isEmpty(f)&&f.addClass("activate"),f.append('<div class="'+r.slice(1)+' cf" data-id="'+i+'">'+v+p+_+h+"</div>"),l.remove(),e.updateSlides(f)}}),s.on("click",n,function(a){a.preventDefault();var i=t(this),n=i.closest(r),o=n.find(".carousel_slide_title").text(),c=n.data("id"),u=n.find(".carousel_slide_edit").attr("href"),f=n.find(".carousel_slide_edit").text(),v=s.find(l),h=s.find(d);!v.find('option[value="'+c+'"]').size()>0&&v.append(t("<option></option>").attr("value",c).attr("data-edit",u).attr("data-edit-title",f).text(o)),n.remove(),e.isEmpty(h)&&h.removeClass("activate"),e.updateSlides(h)}),a.each(function(){t(this).sortable({axis:"y",placeholder:"ui-state-highlight",handle:".carousel_slide_handle",update:function(){e.updateSlides(t(this))},stop:function(){e.updateSlides(t(this))}}),t(this).disableSelection()})},isEmpty:function(e){return!t.trim(e.html())}},new i}(jQuery,window,document);