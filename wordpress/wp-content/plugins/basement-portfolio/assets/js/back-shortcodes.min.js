!function(t,i,a){"use strict";function e(){var t=this;t.fillSmartTiles(),t.smartprojects()}var o=(t(i),t(a)),r=(t("body"),".portfolio_project_add"),s=".portfolio_project_sortable",d=".portfolio_project_remove",l=".ui-state-default";e.prototype={fillSmartTiles:function(){var t=this,i=o.find(".portfolio_project_insert"),a=i.val(),e=o.find(s);if(a)for(var n=a.split(","),c=0;c<n.length;c++)if(e.size()>0){var f=n[c];if(n[c]){var p=o.find(r+' option[value="'+f+'"]'),u=p.text(),v=p.data("img")?'<div class="portfolio_thumb" style="background-image: url('+p.data("img")+')" data-src="'+p.data("img")+'"></div>':"",h='<strong class="portfolio_project_title">'+u+"</strong>",_='<a href="'+p.data("edit")+'" target="_blank" class="button-secondary button portfolio_project_edit" title="">'+p.data("edit-title")+"</a>",m='<a href="#" class="'+d.slice(1)+'" title=""><i class="fa fa-remove"></i></a>',g='<i class="fa fa-arrows portfolio_project_handle"></i>';p.remove(),t.isEmpty(e)&&e.addClass("activate"),e.append('<div class="'+l.slice(1)+' cf" data-id="'+f+'">'+v+h+g+m+_+"</div>"),t.updateSlides(e)}}},updateSlides:function(i){var a=this,e=o.find(".portfolio_project_insert"),r=[];!a.isEmpty(i)&&e.size()>0?(i.find(l).each(function(){r.push(t(this).data("id"))}),e.val(r.join()).trigger("change")):e.val("").trigger("change")},smartprojects:function(){var i=this,a=(t(r),t(s));o.on("change",r,function(){var a=t(this),e=a.val(),r=a.find('option[value="'+e+'"]'),n=r.text(),c=o.find(s);if(c.size()>0&&e){var f=("<span>"+a.data("index")+"</span>",r.data("img")?'<div class="portfolio_thumb" style="background-image: url('+r.data("img")+')" data-src="'+r.data("img")+'"></div>':""),p='<strong class="portfolio_project_title">'+n+"</strong>",u='<a href="'+r.data("edit")+'" target="_blank" class="button-secondary button portfolio_project_edit" title="">'+r.data("edit-title")+"</a>",v='<a href="#" class="'+d.slice(1)+'" title=""><i class="fa fa-remove"></i></a>',h='<i class="fa fa-arrows portfolio_project_handle"></i>';i.isEmpty(c)&&c.addClass("activate"),c.append('<div class="'+l.slice(1)+' cf" data-id="'+e+'">'+f+p+h+v+u+"</div>"),r.remove(),i.updateSlides(c)}}),o.on("click",d,function(){var a=t(this),e=a.closest(l),d=e.find(".portfolio_project_title").text(),n=e.data("id"),c=e.find(".portfolio_thumb").data("src"),f=e.find(".portfolio_project_edit").attr("href"),p=e.find(".portfolio_project_edit").text(),u=o.find(r),v=o.find(s);u.append(t("<option></option>").attr("value",n).attr("data-img",c).attr("data-edit",f).attr("data-edit-title",p).text(d)),e.remove(),i.isEmpty(v)&&v.removeClass("activate"),i.updateSlides(v)}),a.each(function(){t(this).sortable({axis:"y",placeholder:"ui-state-highlight",handle:".portfolio_project_handle",update:function(){i.updateSlides(t(this))},stop:function(){i.updateSlides(t(this))}}),t(this).disableSelection()})},isEmpty:function(i){return!t.trim(i.html())}},new e}(jQuery,window,document);